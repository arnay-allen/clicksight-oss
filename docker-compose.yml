version: "3.8"

services:
  clicksight:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: clicksight
    ports:
      - "8080:80"
    environment:
      # ClickHouse connection details
      # These will be baked into the build, so make sure to rebuild if changed
      - VITE_CLICKHOUSE_URL=${VITE_CLICKHOUSE_URL:-http://localhost:8123}
      - VITE_CLICKHOUSE_USER=${VITE_CLICKHOUSE_USER:-default}
      - VITE_CLICKHOUSE_PASSWORD=${VITE_CLICKHOUSE_PASSWORD:-}
      - VITE_CLICKHOUSE_DATABASE=${VITE_CLICKHOUSE_DATABASE:-analytics}
    restart: unless-stopped
    networks:
      - clicksight-network

networks:
  clicksight-network:
    driver: bridge
